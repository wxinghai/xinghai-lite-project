<template>
	<view class="container">
		<!-- 搜索栏 - 优化设计更圆润简洁 -->
		<view class="search-bar">
			<view class="search-box" @click="focusSearch">
				<text class="search-icon">🔍</text>
				<input 
					class="search-input" 
					placeholder="输入动作名字搜索" 
					placeholder-style="color: #999;" 
					confirm-type="search"
					v-model="searchKeyword"
					@confirm="searchActions"
					ref="searchInput"
				/>
			</view>
			<view class="add-btn" @click="addAction">
				<text class="add-icon">+</text>
			</view>
		</view>
		
		<!-- 内容区 -->
		<view class="content">
			<!-- 左侧部位导航 - 调整宽度更紧凑 -->
			<scroll-view class="body-parts" scroll-y="true" show-scrollbar="false">
				<view 
					class="body-part" 
					v-for="(part, index) in bodyParts" 
					:key="index"
					:class="{ active: activeBodyPart === index }"
					@click="selectBodyPart(index)"
				>
					<text class="body-part-text" :class="{ 'active-text': activeBodyPart === index }">{{ part }}</text>
				</view>
			</scroll-view>
			
			<!-- 右侧内容区 -->
			<view class="right-content">
				<!-- 动作列表 - 使用waterfall实现瀑布流布局 -->
				<waterfall 
					class="action-list" 
					column-count="2"
					 column-gap="10rpx" 
					 
					:list-data="currentCategoryActions"
					show-scrollbar="false"
				>
					<cell v-for="(action) in currentCategoryActions" :key="action.id">
						<view class="action-item" @click="viewActionDetail(action)">
							<image 
								class="action-image" 
								:src="action.image || '/static/actions/default.png'" 
								mode="aspectFit"
							></image>
							<text class="action-name">{{ action.name }}</text>
						</view>
					</cell>
				</waterfall>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				searchKeyword: '',
				activeBodyPart: 0,
				bodyParts: ['胸','背', '腿', '肩', '斜方肌', '二头', '三头', '小腿', '前臂', '颈部', '臀部', '功能性', '核心稳定'],
				actions: [
					{
						id: 1,
						name: '杠铃卧推',
						image: '/static/actions/640.gif',
						bodyPart: 0 // 胸
					},
					{
						id: 2,
						name: '暂停卧推',
						image: '/static/actions/pause-press.png',
						bodyPart: 0 // 胸
					},
					{
						id: 3,
						name: '宽距杠铃卧推',
						image: '/static/actions/incline-press.png',
						bodyPart: 0 // 胸
					},
					{
						id: 4,
						name: '上斜杠铃卧推',
						image: '/static/actions/incline-bench.png',
						bodyPart: 1 // 上胸
					},
					{
						id: 5,
						name: '下斜杠铃卧推',
						image: '/static/actions/decline-press.png',
						bodyPart: 2 // 中下胸
					},
					{
						id: 6,
						name: '杠铃片夹胸',
						image: '/static/actions/fly.png',
						bodyPart: 0 // 胸
					},
					{
						id: 7,
						name: '抬腿杠铃卧推',
						image: '/static/actions/leg-press.png',
						bodyPart: 0 // 胸
					}
				]
			}
		},
		computed: {
			currentCategoryActions() {
				// 只按身体部位筛选动作
				return this.actions.filter(action => 
					action.bodyPart === this.activeBodyPart
				);
			}
		},
		onLoad() {
			uni.setNavigationBarTitle({
				title: '动作'
			});
		},
		methods: {
			selectBodyPart(index) {
				this.activeBodyPart = index;
			},
			focusSearch() {
				this.$nextTick(() => {
					this.$refs.searchInput.focus();
				});
			},
			searchActions() {
				if (!this.searchKeyword.trim()) return;
				
				uni.showToast({
					title: '搜索: ' + this.searchKeyword,
					icon: 'none'
				});
				
				// 实际应用中会调用搜索API
			},
			addAction() {
				uni.showToast({
					title: '添加动作',
					icon: 'none'
				});
			},
			viewActionDetail(action) {
				uni.showToast({
					title: '查看动作: ' + action.name,
					icon: 'none'
				});
			}
		}
	}
</script>

<style>
	.container {
		flex: 1;
		flex-direction: column;
		background-color: #f5f5f5;
	}
	
	/* 搜索栏 - 优化设计更圆润简洁 */
	.search-bar {
		flex-direction: row;
		padding: 20rpx;
		align-items: center;
		background-color: #ffffff;
	}
	
	.search-box {
		flex: 1;
		flex-direction: row;
		align-items: center;
		background-color: #f5f5f5;
		border-radius: 45rpx;
		padding: 15rpx 30rpx;
		margin-right: 20rpx;
	}
	
	.search-icon {
		font-size: 32rpx;
		color: #999999;
		margin-right: 10rpx;
	}
	
	.search-input {
		flex: 1;
		height: 60rpx;
		font-size: 28rpx;
	}
	
	.add-btn {
		width: 70rpx;
		height: 70rpx;
		background-color: #f0f8ff;
		border-radius: 50%;
		justify-content: center;
		align-items: center;
	}
	
	.add-icon {
		font-size: 40rpx;
		color: #4A9EFF;
		font-weight: bold;
		line-height: 65rpx;
		text-align: center;
	}
	
	/* 内容区 */
	.content {
		flex: 1;
		flex-direction: row;
		background-color: #f5f5f5;
	}
	
	/* 左侧导航 - 调整宽度更紧凑 */
	.body-parts {
		width: 150rpx;
		padding-top: 10rpx;
		 
 
	}
	
	.body-part {
		height: 90rpx;
		justify-content: center;
		align-items: center;
		position: relative;
 
	}
	
	.body-part.active {
		border-left-width: 10rpx;
		border-left-color: #4A9EFF;
		background-color: #eeeeee;
	}
	
	.body-part-text {
		font-size: 28rpx;
		color: #666;
		text-align: center;
	}
	
	.active-text {
		color: #333;
		font-weight: bold;
	}
	
	/* 右侧内容 */
	.right-content {
		width: 600rpx;
		flex-direction: column;
		padding: 0;
		position: relative;
 
		 
	}
	
	/* 动作列表 - waterfall布局 */
	.action-list {
		width: 600rpx;
		padding: 5px;
	 
	}
	
	.action-item {
		width: 280rpx;
		border-radius: 20rpx; 
		position: relative;
		margin-bottom: 10rpx;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		background-color: #fff;
	}
	
	.action-image {
		width: 100rpx;
		height:200rpx;
	}
	
	.action-name {
		font-size: 28rpx;
		color: #333;
		padding: 20rpx;
		lines: 1;
		text-overflow: ellipsis;
		text-align: center;
	}
	
	/* 无数据状态 */
	.no-data {
		align-items: center;
		justify-content: center;
		padding: 100rpx 0;
		width: 750rpx; /* 确保宽度充满 */
	}
	
	.no-data-text {
		color: #999;
		font-size: 28rpx;
		text-align: center;
	}
</style> 