<template>
	<view class="container">
		<!-- æœç´¢æ  - ä¼˜åŒ–è®¾è®¡æ›´åœ†æ¶¦ç®€æ´ -->
		<view class="search-bar">
			<view class="search-box" @click="focusSearch">
				<text class="search-icon">ğŸ”</text>
				<input 
					class="search-input" 
					placeholder="è¾“å…¥åŠ¨ä½œåå­—æœç´¢" 
					placeholder-style="color: #999;" 
					confirm-type="search"
					v-model="searchKeyword"
					@confirm="searchActions"
					ref="searchInput"
				/>
			</view>
			<view class="add-btn" @click="addAction">
				<text class="add-icon">+</text>
			</view>
		</view>
		
		<!-- å†…å®¹åŒº -->
		<view class="content">
			<!-- å·¦ä¾§éƒ¨ä½å¯¼èˆª - è°ƒæ•´å®½åº¦æ›´ç´§å‡‘ -->
			<scroll-view class="body-parts" scroll-y="true" show-scrollbar="false">
				<view 
					class="body-part" 
					v-for="(part, index) in bodyParts" 
					:key="index"
					:class="{ active: activeBodyPart === index }"
					@click="selectBodyPart(index)"
				>
					<text class="body-part-text" :class="{ 'active-text': activeBodyPart === index }">{{ part }}</text>
				</view>
			</scroll-view>
			
			<!-- å³ä¾§å†…å®¹åŒº -->
			<view class="right-content">
				<!-- åŠ¨ä½œåˆ—è¡¨ - ä½¿ç”¨waterfallå®ç°ç€‘å¸ƒæµå¸ƒå±€ -->
				<waterfall 
					class="action-list" 
					column-count="2"
					 column-gap="10rpx" 
					 
					:list-data="currentCategoryActions"
					show-scrollbar="false"
				>
					<cell v-for="(action) in currentCategoryActions" :key="action.id">
						<view class="action-item" @click="viewActionDetail(action)">
							<image 
								class="action-image" 
								:src="action.image || '/static/actions/default.png'" 
								mode="aspectFit"
							></image>
							<text class="action-name">{{ action.name }}</text>
						</view>
					</cell>
				</waterfall>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				searchKeyword: '',
				activeBodyPart: 0,
				bodyParts: ['èƒ¸','èƒŒ', 'è…¿', 'è‚©', 'æ–œæ–¹è‚Œ', 'äºŒå¤´', 'ä¸‰å¤´', 'å°è…¿', 'å‰è‡‚', 'é¢ˆéƒ¨', 'è‡€éƒ¨', 'åŠŸèƒ½æ€§', 'æ ¸å¿ƒç¨³å®š'],
				actions: [
					{
						id: 1,
						name: 'æ é“ƒå§æ¨',
						image: '/static/actions/640.gif',
						bodyPart: 0 // èƒ¸
					},
					{
						id: 2,
						name: 'æš‚åœå§æ¨',
						image: '/static/actions/pause-press.png',
						bodyPart: 0 // èƒ¸
					},
					{
						id: 3,
						name: 'å®½è·æ é“ƒå§æ¨',
						image: '/static/actions/incline-press.png',
						bodyPart: 0 // èƒ¸
					},
					{
						id: 4,
						name: 'ä¸Šæ–œæ é“ƒå§æ¨',
						image: '/static/actions/incline-bench.png',
						bodyPart: 1 // ä¸Šèƒ¸
					},
					{
						id: 5,
						name: 'ä¸‹æ–œæ é“ƒå§æ¨',
						image: '/static/actions/decline-press.png',
						bodyPart: 2 // ä¸­ä¸‹èƒ¸
					},
					{
						id: 6,
						name: 'æ é“ƒç‰‡å¤¹èƒ¸',
						image: '/static/actions/fly.png',
						bodyPart: 0 // èƒ¸
					},
					{
						id: 7,
						name: 'æŠ¬è…¿æ é“ƒå§æ¨',
						image: '/static/actions/leg-press.png',
						bodyPart: 0 // èƒ¸
					}
				]
			}
		},
		computed: {
			currentCategoryActions() {
				// åªæŒ‰èº«ä½“éƒ¨ä½ç­›é€‰åŠ¨ä½œ
				return this.actions.filter(action => 
					action.bodyPart === this.activeBodyPart
				);
			}
		},
		onLoad() {
			uni.setNavigationBarTitle({
				title: 'åŠ¨ä½œ'
			});
		},
		methods: {
			selectBodyPart(index) {
				this.activeBodyPart = index;
			},
			focusSearch() {
				this.$nextTick(() => {
					this.$refs.searchInput.focus();
				});
			},
			searchActions() {
				if (!this.searchKeyword.trim()) return;
				
				uni.showToast({
					title: 'æœç´¢: ' + this.searchKeyword,
					icon: 'none'
				});
				
				// å®é™…åº”ç”¨ä¸­ä¼šè°ƒç”¨æœç´¢API
			},
			addAction() {
				uni.showToast({
					title: 'æ·»åŠ åŠ¨ä½œ',
					icon: 'none'
				});
			},
			viewActionDetail(action) {
				uni.showToast({
					title: 'æŸ¥çœ‹åŠ¨ä½œ: ' + action.name,
					icon: 'none'
				});
			}
		}
	}
</script>

<style>
	.container {
		flex: 1;
		flex-direction: column;
		background-color: #f5f5f5;
	}
	
	/* æœç´¢æ  - ä¼˜åŒ–è®¾è®¡æ›´åœ†æ¶¦ç®€æ´ */
	.search-bar {
		flex-direction: row;
		padding: 20rpx;
		align-items: center;
		background-color: #ffffff;
	}
	
	.search-box {
		flex: 1;
		flex-direction: row;
		align-items: center;
		background-color: #f5f5f5;
		border-radius: 45rpx;
		padding: 15rpx 30rpx;
		margin-right: 20rpx;
	}
	
	.search-icon {
		font-size: 32rpx;
		color: #999999;
		margin-right: 10rpx;
	}
	
	.search-input {
		flex: 1;
		height: 60rpx;
		font-size: 28rpx;
	}
	
	.add-btn {
		width: 70rpx;
		height: 70rpx;
		background-color: #f0f8ff;
		border-radius: 50%;
		justify-content: center;
		align-items: center;
	}
	
	.add-icon {
		font-size: 40rpx;
		color: #4A9EFF;
		font-weight: bold;
		line-height: 65rpx;
		text-align: center;
	}
	
	/* å†…å®¹åŒº */
	.content {
		flex: 1;
		flex-direction: row;
		background-color: #f5f5f5;
	}
	
	/* å·¦ä¾§å¯¼èˆª - è°ƒæ•´å®½åº¦æ›´ç´§å‡‘ */
	.body-parts {
		width: 150rpx;
		padding-top: 10rpx;
		 
 
	}
	
	.body-part {
		height: 90rpx;
		justify-content: center;
		align-items: center;
		position: relative;
 
	}
	
	.body-part.active {
		border-left-width: 10rpx;
		border-left-color: #4A9EFF;
		background-color: #eeeeee;
	}
	
	.body-part-text {
		font-size: 28rpx;
		color: #666;
		text-align: center;
	}
	
	.active-text {
		color: #333;
		font-weight: bold;
	}
	
	/* å³ä¾§å†…å®¹ */
	.right-content {
		width: 600rpx;
		flex-direction: column;
		padding: 0;
		position: relative;
 
		 
	}
	
	/* åŠ¨ä½œåˆ—è¡¨ - waterfallå¸ƒå±€ */
	.action-list {
		width: 600rpx;
		padding: 5px;
	 
	}
	
	.action-item {
		width: 280rpx;
		border-radius: 20rpx; 
		position: relative;
		margin-bottom: 10rpx;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		background-color: #fff;
	}
	
	.action-image {
		width: 100rpx;
		height:200rpx;
	}
	
	.action-name {
		font-size: 28rpx;
		color: #333;
		padding: 20rpx;
		lines: 1;
		text-overflow: ellipsis;
		text-align: center;
	}
	
	/* æ— æ•°æ®çŠ¶æ€ */
	.no-data {
		align-items: center;
		justify-content: center;
		padding: 100rpx 0;
		width: 750rpx; /* ç¡®ä¿å®½åº¦å……æ»¡ */
	}
	
	.no-data-text {
		color: #999;
		font-size: 28rpx;
		text-align: center;
	}
</style> 